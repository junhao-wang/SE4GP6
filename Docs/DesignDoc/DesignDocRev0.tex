\documentclass[12pt, titlepage]{article}

\usepackage{fullpage}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{enumerate}
\usepackage{float}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=red,
    urlcolor=blue
}
\usepackage[round]{natbib}

\newcounter{acnum}
\newcommand{\actheacnum}{AC\theacnum}
\newcommand{\acref}[1]{AC\ref{#1}}

\newcounter{ucnum}
\newcommand{\uctheucnum}{UC\theucnum}
\newcommand{\uref}[1]{UC\ref{#1}}

\newcounter{mnum}
\newcommand{\mthemnum}{M\themnum}
\newcommand{\mref}[1]{M\ref{#1}}

\title{SE 4GP6B: Design Document\\A World Apart}

\author{Team 4, SantaHatesPoorKids
		\\ Jim Wu, 001409055
		\\ Ian Yang, 001217664
		\\ Gabriel Castagner, 001412885
		\\ Junhao Wang, 001215428
}

\date{\today}

\begin{document}

\maketitle

\pagenumbering{roman}
\tableofcontents
\listoftables
\listoffigures

\begin{table}[bp]
\caption{\bf Revision History}
\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
November 28 & 1.0 & Created document\\
Nov 30 & 1.1 & Formatted document with section one added\\

\bottomrule
\end{tabularx}
\end{table}

\newpage

\pagenumbering{arabic}

\section{Introduction}
\subsection{Purpose of Document}
The purpose of this document is to provide answers to the design questions that the Daniel Szymczak posed for our group, to add more insight to modules of the project that have already been implemented, and to trace these questions back to the code of the project for December 4th.
Our project, "A World Apart", is a Sci-fi, rogue like strategy game that has multiple components and different types of game mechanisms that this document will cover in detail. As the project progresses, the modules may be subject to change and will be reflected in the revision history of the document.
\subsection{Terminology and Abbreviations}
\begin{enumerate}
	\item \textbf{ Bounds of play - } The edges of the map where the player is not able to move past. The camera touches the bounds, the camera will not move past that location. 
	\item \textbf{Greyed out - } A button or selection that is not able to be selected because it's conditions are not met. The visual representation of this is when the button has an additional grey alpha applied on top of the itself.
\end{enumerate}
\subsection{Customized Group Question Explanations}
\quad Below are the questions that were specifically tailored to our group, each question contains an answer and a reference to the code that is found in References.
\begin{enumerate}[{\textbf{Question}}1. ]
%%%%%%Question
	\item \textbf{Keep your requirements in mind while addressing how you're going to implement your game. How are you going to implement specific features? And what decisions have you made regarding that implementation? You can point me to code/comments as necessary, but make sure it's clear why you've made that choice.}
%%%%%%Questionn NOT DONE!!!!!!!!!!!!!!!
	\item \textbf{Can you save/load the game? Where does it save? Can it be customized? How does loading work? Are there limited save slots? Does the game autosave? Are there checkpoints and how do they work?}
	You can load and save the game at certain sections of the game. With the game being a roguelike, we really want to ensure that we can minimize the number of quick loads without corrupting the file so that the player can have an ironman experience. The game will be saved at every decision that the character makes, as we will model the way Crusader Kings 2 and FTL perform their autosaves. The times that the game will be saved will be during the following scenarios:
	\begin{enumerate}
	\item When the player moves to a new node, the save function will be called in parallel and save the part position at the new node.
	\item When the player closes the merchant menu.
	\item When the player selects end turn for their character.
	\item When the enemies have finished their turn.
	\item When a character is incapacitated after an enemy attack.
	\item When an enemy is destroyed after a player attack.
	\item When the player wins the boss battle and moves to the next region. 
	\end{enumerate}
	The player will also be able to save at any moment outside of these save points
%%%%%%Question
	\item \textbf{Is there a map? Can the player see the whole thing from the beginning or is it obscured? How do they reveal more of it? How do they look at it? Does the game pause while they look at it? What is shown on the map?}
%%%%%%Question
	\item \textbf{How is your map generated? What algorithms are you using for generation? pathfinding? AI? etc. If you're using your own algorithms, explain them. If you're using existing algorithms, name them and provide a source.}
%%%%%%Question
	\item \textbf{Can the player soft-lock the game and be forced to restart? How? Can you guarantee this won't happen? How?}
%%%%%%Question
	\item \textbf{What do your menus look like? What options are available to the player? How many menus are there? Is there a level-select screen?}
%%%%%%Question
	\item \textbf{What do your combat levels look like? What are the puzzles/obstacles/enemies in each? What is the goal of each level? Are they all the same or different? How does the story progress between levels?}
%%%%%%Question
	\item \textbf{How does your combat system work? What options are available to the players? How is damage calculated?}
	The combat system works as a standard turn based strategy combat system would work with a few modifications. Turns happen instead at an individual level, meaning player and AI turns may happen at after each other in a random order. Each unit is given turn index of when they are allowed to have their turn and the order of the turns is randomly generated at the beginning of the combat scene. If a unit is incapacitated, then they are removed from the turn pool and the next unit in the turn pool gets to go. The only exception to this is when the second last player character is incapacitated. If this case happens, then the final player character turn index is moved to the next player unit.
	
	The player has a wide variety of actions to perform when it is their turn. The player's turn can  be broken down into three components:
	\begin{enumerate}
	\item Movement Phase - This phase allows the character to move no a new location on the map given their movement speed value. The player will not be able to move into grid positions that have terrain objects or other units on them. They will be forced to move around it those grid positions. 
	\item Action Phase - This phase allows the player to select actions that are able to be performed by their inventory or character abilities. The inventory actions may be able to apply buffs to the character, a unique attack that can be performed by the character or a buff to another character. 
	\item Attack Phase - This phase allows the player to attack enemies in the combat scene either through the use of close combat or weapons combat. Close combat is only able to be performed upon a unit that is one grid cell away, this includes diagonal cells. Weapons combat can happen from a specific length away of grid cells and uses the bullet resource if the equipped weapon uses bullets. 
	\end{enumerate}
	Any of the above phases can be performed in any order with the exception of the Attack Phase. If the unit performs it's attack phase before any other phase, then they are unable to move or perform and action.
	The damage is calculated as the following:
	When a Unit makes an Attack or a similar action, the Attacked unit will lose Health equal to Attacker’s Attack - Defender’s Current Armor, with a minimum 1. When a Unit’s Health is half or below, its Attack is halved (rounded up). Any items that are equipped to the character are added to the unit's statistics ontop of their base statistics.
%%%%%%Question
	\item\textbf{ What constitutes your player's status? What stats will be shown? How will they be shown (where are they located on screen)? Are they always visible or can they be hidden? How?}
	The player characters will have 6 statistics that they will level up and can buff with items. These items are:
	\begin{enumerate}
	\item Max Health - determines how much health a unit has. Health dictates how close a Unit is to being Incapacitated. Once a Unit’s health drops to 0 or below, that Unit is Incapacitated. When a Unit makes an Attack or a similar action, the Attacked unit will lose Health equal to Attacker’s Attack - Defender’s Current Armor, minimum 1. When a Unit’s Health is half or below, its Attack is halved (rounded up).
	\item Max Armour- determines how much Armour a unit has. The armour value determines how much Health damage is taken when an attack is made to Health. Armor is its own value,and can be attacked. Damage to Armor is equal to the Attacker’s Attack.
	\item Power - determines how much damage is done to another Unit when an Attack Action is made
	\item Speed - decides the Unit’s place in the Turn order. Units with higher Speed will have a Turn before units with lower Speed.
	\item Movement - determines how many Squares a Unit can move from its current position. The Squares that are possible for the Unit to move through is determined with a pathfinding algorithm.
	\item Range - determines how many Squares away from the current Square the Unit can attack. Squares in range are determined with the same algorithm as movement, with the exception that Obstacles do not factor into the pathfinding.
	\end{enumerate}
	These stats can all be viewed by the player in the respected menus.
	There are two locations where you can view the character's stats, these are in the item/merchant menu and in the combat scene.
	For the Item/Merchant menu, you will be able to view your character's stats by selecting the desired character. The stats will then be present along with the character and if the player hovers over the stat, a tooltip will show the breakdown of the statistic. 
	For the Combat scene, you will be able to view your character's stats by selecting the desired character. The stats will then be presented in the top left hand side of the screen. The only difference is that health and amour modifiers start to be addressed when taking damage from enemies and will be updated when certain thresholds are met. Breakdowns of the stat will still be shown if the player hovers the mouse over the stat value in a tool tip format.
%%%%%%Question
	\item \textbf{When does a player's turn end? Must they press a button or will it automatically end when they no longer have actions available? Will they ever run out of actions to perform? How many different actions can a player choose from? What do they all do? Does performing one action prevent the player from taking a different action on the same turn or subsequent turns?}
	
	A player's turn ends when they select the end turn button. This gives the player time to reflect on the actions they just performed and plan for their next steps by going at their own pace. For enemies, they will simply iterate through their turn and complete it when they are finished with their turn.
	The player has a limited number of actions they can perform for each phase: 
	\begin{enumerate}
	\item Movement Phase - This phase's limited actions are the number of tiles they can move on the map and is based on the character's speed. This phase terminates if the character begins another phase.
	\item Action Phase - This phase's limitation is the singular action that the player can perform. Once the character has consumed or used an item, this phase is no longer able to be interacted with.
	\item Attack Phase - This phase's limitation is again the singular attack that the player can perform. Once the character has performed a melee or ranged attack, this phase is no longer able to be interacted with.
	\end{enumerate}
	
	There are only two cases of where the player's phases would terminate to the end of the turn and these are when the player attacks an enemy and when the player uses the action or attack phase when they have not expended all of their movement tiles. Otherwise the phases can occur in any order.
%%%%%%Question
	\item \textbf{How does a player "die"/fail a level? Is it from health=0, falling off screen, getting stuck, etc? What happens when they do? How do they continue?}
	Health determines how close a Unit is to being Incapacitated. Once a Unit’s health drops to 0 or below, that Unit is Incapacitated. An Incapacitated Unit does not have an place in the Turn order, and therefore cannot Move or perform Actions. If all player characters have been Incapacitated, then the player has failed the level and is redirected to the end game scene. Once the game review has been viewed, the player is redirected to the main menu and the save file is set as unplayable.
%%%%%%Question	
	\item \textbf{When changing game settings, will the changes apply immediately or will they require the game to be restarted? Are the changes persistent? How? What settings can be changed?}
	A major of game settings will apply immediately when the game is running and only a few settings will be needed to restart the game. Our group is still unsure of how Unity determines it's resolution or Anti Aliasing settings but we can determine that only those two setting will be needed to restart the game if changed. If any other graphical, UI or audio changes are made to the game, they will be saved on the user's computer. We can ensure this by reading the information from a file that has all of the default settings for the game and then save the changes to that file if changes are made. The number of settings that can be changed are the system's resolution, Anti Aliasing, texture quality, windowed mode, UI size and offeset, master volume, music volume and sound effect volume.
%%%%%%Question
	\item \textbf{How do players interact with other objects/enemies? How far away should they be? Do they need to press a specific button or is it automatic once within a given range? What are the specific types of interactions possible and how do they work?}
	Inside of the combat scene, the player will only be able to interact with a handful of other items. These include the other character players, scenery, regular enemies and bosses. The player should never be able to move through or ontop of any other items in the scene. 
	\begin{enumerate}
	\item Other Character Players - These are the other characters in the scene. The player may be able to interact with these characters if the current character is currently applying a buff or item action during the action phase. The player cannot attack other characters.
	\item Scenery - These items are all of the obstacle on the map, usually will be rocks or other debris. These are objects that player characters or enemies and traverse through. 
	\item Enemies - These are the generic enemies in the combat phase. Players can interact with the enemies by selecting them as the target for an item activation or attack, both melee or ranged. If a player is going to perform a melee attack, the enemy must be within one grid cell to be attacked. If the player is going to perform a ranged attack or item activation, the enemy must be in range for the character top perform that action. If an attack is made, then the appropriate damage is calculated to the corresponding bars.
	\item Bosses - This entity are the final bosses that occur at the end of every world. The boss may take up one grid tile or multiple grid tiles depending on it's size. If the boss is more than one grid size, then the enemy will only be able to move into sections of the map that do not have more than 50\% of the boss's tile size. The players will also be able to attack the boss within one Grid cell of it's tile size. The interaction is the same as regular enemies.
	\end{enumerate}
	
	The player does need to select the entity that they are interact with in order to perform the desired action, and the visual que will be given showing that they player can make that selection. If the entity cannot be interact with, then it will have no visual que.
	There are a listed number of interactions listed in the entities above that can be performed, this section more detail about what further options the player can make with each respective action:
	\begin{enumerate}
	\item Melee Attack - This attack is chosen when a character wants to perform an attack that is next to an enemy. The player has the option to select the enemy's armour or health values.
	\item Ranged Attack - This attack is chosen when a character wants to perform an attack that far away from an enemy, but is still within range. The player has the option to select the enemy's armour or health values, but the action can only be performed if the player has enough bullets to use against the enemies.
	\item Item Buff/Debuff- This action is performed when the character wants to buff another player character or debuff an enemy. This action is usually performed from a given range and must ensure that the desired entity is within range to be performed. The corresponding buff or debuff is applied for the listed number of turns to the desired enemy if all the conditions are met.
	\end{enumerate}
%%%%%%Question
	\item \textbf{What does "pausing" the game do? What will the player see when it's paused? What do your menus look like? Will the game continue playing in the background (ex. GoldenEye 64 watch system), or will it freeze?}
	
	Our game will only have a pausing feature during the combat scene. If the player hits the escape key, main process will hang and the player will only be able to view the menu options. If the player returns to the combat scene, the game will progress as normal. If the player is in the Overworld view, pausing the game will not be paused and a selection that is still be traversed will still occur if the player hits the menu button. The player will be able to view the menu they have selected in both scenes with an alpha layer applied to the background of the scene so they can still see the game. 
	There are a few menus in the game, but with the exception of the overworld main menu, will send the current game session into a hanging position until the menu has been closed. The list of menus proceeds as:
	\begin{enumerate}
	\item Main Menu - This menu is the opening menu that the player first sees and controls the game initiation menus. The menu connects to the functionality of  the New game button, Load Game menu, and Options menu.
	\item Options Menu - This menu opens up the selections that the player can make to optimize their game experience with audio and visual changes.
	\item Load Game Menu - This menu lists all the games that had been saved in the respective folder. Selecting one of the loaded games will show it's file name, game details and progression. Loading the game will return to the last point of which it was saved.
	\item Merchant Menu - This menu is opened when the player lands on the merchant node. See the merchant question for more references. Once the menu has been closed, the player will not be able to re open the menu at that node. As such, a prompt to ask if you are ok with this selection is mentioned before the player leaves the shop. %add reference here%.
	\item Item Menu - This menu is opened from selecting the item button from the over world view. This menu consists of 3 panels, which include from left to right the character loadouts, item pool and item description. The character load out displays what each selected character is equipped while also displaying their stats. The Item pool displays all of the unequipped items that the player party has acquired. There will be sort by buttons that will allow the items to be sorted by type and level. Finally the item description panel displays the description, expanded item image and stat bonuses of a selected item. A item is selected when the mouse is hovered over the item. Stat changes will be changed to the character aswell indicating changes that would be made to the character with this specific item change. 
	\item Overview World Menu - This menu acts like the main menu but for the overview world. It can access the options menu and a save, load and exit game buttons. When this button is selected, the game is not paused.
	\item Combat Menu - This menu acts like the main menu but for the overview world. It can access the options menu and a save, load and exit game buttons. When this button is selected, the game is paused.
	\end{enumerate}
%%%%%%Question
	\item \textbf{What are your different enemy types (including sprites/models)? How do they work? Do they follow predictable patterns? AI? Some combination? Be specific with which enemy does what. How do they react to the player? etc.}
%%%%%%Question NOT DONE!!!!!!!!!!!!!!!
	\item \textbf{For items, can item attributes stack? How many items can a player use simultaneously? What categories of items do you have (ex. damage boosting, healing)? What items belong to each category? How does each item work (list them all and describe them)? How does a player pick up an item (do they need to be within a certain range? Do they need to press a button)?}
	Items will have the ability to stack on the player's base stats, current modifiers in the combat session, and other item stacks. The breakdown of the stat will be given by scrolling over the character's statistic number and a tooltip will show how those values are derived by iterating through the same modifiers and items. Player's will not be told what items stack well with others as this will be kept as the idea of item combinations a dynamic practice.
	For the current version, the player is able to equip themselves with a melee weapon, a ranged weapon, a armour buff, a tool, and two consumable items. This layout may be subject to change if we think the player needs more or fewer item slots and if item categories need to be redistributed. As of right now, the consumable item slot is able to be equipped passive (applies a constant stat change) and external consumable (stat change affects other player characters rather than the equipped character) items but this will be tested to find the best balance output that we wish to achieve.
	Our items can be categorized into 4 sections:
	\begin{enumerate}
	\item Passive Items - These items are never executed in the combat phase but are instead apply a stat change to the character for the course of the combat phase. There might be a condition for the item to trigger, but the player is never able to activate it.
	\item Consumable Items - These items are used when the player activates them and are not replenished for the course of the entire game. If a player uses this item, then it is removed from play and the item slot becomes open. There may be multiple Consumable items in the same slot, but once all instances have been used, ie all grenades have been used, then the item is removed.
	\item Rechargeable Items - These items work similar to consumable items, but they instead have a cool down period that needs to be completed before they can used again. These items also replenish when the combat phase has been completed, but there may only be a certain amount of times that the player can use it in the current combat phase.
	\item Equipment Items - These are an extension to the passive items but have specific categories for their item slot and character type. They include the melee, armour and ranged items but may also include other items if we deem that only specific items are allowed to be used by a given character. Equipment items may also provide specific bonus modifiers to specific enemies or attacks, something that passive items will not do.
	\end{enumerate}
	Here are a description and categorization of each item that the team has currently come up with:
	\begin{enumerate}
	\item Passive Items - These items are never executed in the combat phase but are instead apply a stat change to the character for the course of the combat phase. There might be a condition for the item to trigger, but the player is never able to activate it.
	\item Consumable Items - These items are used when the player activates them and are not replenished for the course of the entire game. If a player uses this item, then it is removed from play and the item slot becomes open. There may be multiple Consumable items in the same slot, but once all instances have been used, ie all grenades have been used, then the item is removed.
	\item Rechargeable Items - These items work similar to consumable items, but they instead have a cool down period that needs to be completed before they can used again. These items also replenish when the combat phase has been completed, but there may only be a certain amount of times that the player can use it in the current combat phase.
	\item Equipment Items - These are an extension to the passive items but have specific categories for their item slot and character type. They include the melee, armour and ranged items but may also include other items if we deem that only specific items are allowed to be used by a given character. Equipment items may also provide specific bonus modifiers to specific enemies or attacks, something that passive items will not do.
	\end{enumerate}
	More items will be added to the game, but each conceptualization will be categorized to the above categorizes. By constraining the items to the 4 categories, we can ensure that our game continues to be modular while having that creative flexibility to add cool or balanced items.
	Items are activated by clicking on them in the combat scene in the action phase. Items that are are unable to be activated are are 'greyed' out indicated that they cannot be activated in the scene. These will include passive, equipment and rechargeable items that still in their cooldown. Rechargeable items will have number over the item icon showing how many turns are needed for the item to be used again.
%%%%%%Question
	\item \textbf{How does the item shop work? What items are available? How much should they cost? Are all types of items available at all times or are there only specific items/item types available at a given instant?}
	There will be a node that is mapped with the Merchant and when the player arrives on the Merchant node, they will be able to open the Merchant menu. The menu will be made up of multiple panels that contain the Merchant's items, the player's items, the character equip load outs and finally party resources like bullets and supplies. The player will then be able to barter with the merchant by transferring items back and forth between the merchant and the player item pools. There will be a barter value at the bottom of the page that shows the player if the merchant will accept the offer from -100 to 100. Positive values will be accepted stating that the merchant will think he is getting a good deal, a negative will not be accepted stating that the merchant will think he is not getting a good deal and a 0 results in a fair deal that will be accepted. Because the game has no currency, selling or buying items/resources will result in the player needing to sell/buy items to the merchant. The merchant will probably have unlimited bullets and resources but a random pool of generated items. 
	The items that will be available will be of all different kinds of randomly generated items. This system is better than generating item suggestions based on the lack of items that are useful to player as that may restrict a play style and suppress the rogue like element. 
	The algorithm that will determine the cost of the items will be scalar of the item's level and it's purpose. Testing the project by using automated tests will allow us to see what items are easily able to be purchased and will allow us to balance the game. The item values will be changed in according to allow some items to me more rare than other, allowing important decisions to be made when selling and buying items.
	Part of the rogue like aspect is having that idea that you never know what kind of items you are going to get when you come upon a random event node or merchant node, so having the experience of finding a rare item knowing the chance may never come again. This can put the player in a difficult position and is why we think that this is better than pre programming scripted drops as it can create a sort of repetition. So in that case, no the randomly generated items will only be created in that instance of the merchant, the user cannot go back to purchase them.
%%%%%%Question
	\item \textbf{How does the camera system work? Is it perspective or orthogonal? Are there multiple cameras? Does the camera follow the player? How does it do that (algorithm)? Can the player control the camera? If so, how?}
	There are two main camera view for the game, the Overworld camera and the Combat Camera. The Overworld camera is set to a topdown, perpendicular view to the Overworld map. The Combat camera is set at an isometric view of the map (diamond) and is set a 45 degree angle from the x plane, it looks very similar to the Age of Empires two view. Both are orthogonal cameras that the player can manipulate by moving with the WASD, arrow keys or moving the mouse over to the edge of the screen.The Cameras move with unity's built in camera movement control and our scale for the speed will be subject to change for the final project.  The Camera is only ever set on the player party or first playable character when the scenes are initialized, otherwise the player is able to move the camera within the bounds of play. 
\end{enumerate}

\section{Additional Module Explanations}




\section{Code References}

\end{document}
